<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui" 
      xmlns:pe="http://primefaces.org/ui/extensions" 
      xmlns:pm="http://primefaces.org/mobile">

    <h:head>
        <title>::ACCOUNT PASSWORD RESET</title> 
        <link href="./images/mspac.ico" rel="icon" type="image/x-icon" />
        <link href="./files/config/MSpacelogo.png" rel="shortcut icon" type="image/x-icon" />
    </h:head>

    <h:body style="padding-top:100px;  font: 11px georgia;">
        <div style="height: 550px">
            <center>
                <div id="eaders" >
                    <div align="center" style="margin-top: -90px"> <a  href="#{logo_client.getUrlLink()}" target="_blank">
                            <img src="#{logo_client.clnt_logo()}" alt="Mspace"                                  

                                 height="150px"  border="0"  
                                 longdesc="https://www.mspace.co.ke" />
                        </a></div>
                </div>

                <p:panel styleClass="customTitleBar" style="width: 80%; height: auto " id="basic" header="Password Reset">
                    <p:growl id="messa" showDetail="true" />
                    <h:form rendered="#{!preset.confirnReset}">

                        <h:panelGrid columns="3">
                            <p:outputLabel value="Enter Your Username"/>
                            <p:inputText id="user" required="true" requiredMessage="You must enter a username" value="#{preset.username}"/> 
                            <p:commandButton ajax="false" actionListener="#{preset.resetPassword()}" value="Reset Passsword" />
                            <p:message for="user" display="message"/>

                        </h:panelGrid>
                        <br></br>
                        <h:outputText escape="false" style="color: #{preset.showform ? 'black':'red'}" value="#{preset.message}"/>
                        <h:panelGrid rendered="#{preset.showform}" columns="1">
                            <p:outputLabel style="font-weight: bold" value="Enter 6 digit Code:"/>
                            <p:inputText required="true" requiredMessage="Reset code required" id="code" value="#{preset.codeString}"/> 
                            <p:message for="code" display="message"/>
                            <p:commandButton ajax="false" actionListener="#{preset.UpdatePassword()}" value="Verify" />
                        </h:panelGrid>
                    </h:form >
                    <h:form rendered="#{preset.confirnReset}">
                        <h:panelGrid rendered="#{!preset.success}" columns="2">
                            <p:outputLabel value="Enter new Password"/>
                            <p:password  id="pwd" match="pwd2" requiredMessage="Enter new password" validatorMessage="Password Must be More than 4 characters" required="true" value="#{preset.paswword}">
                                <f:validateLength minimum="4"/>
                            </p:password>
                            <p:outputLabel value="Confirm Password"/>
                            <p:password  id="pwd2" requiredMessage="Enter new password" validatorMessage="Password Must be More than 4 characters" required="true" value="#{preset.paswword}">
                                <f:validateLength  minimum="4" />
                            </p:password>
                        </h:panelGrid>
                        <p:commandButton rendered="#{!preset.success}" disabled="#{preset.success}" ajax="false" actionListener="#{preset.persistUpdate()}" value="Reset" />
                        <h:outputLink id="link" value="home.jsf" target="_self" style="color: blue;"> 
                            Back to login Page
                        </h:outputLink>
                    </h:form>

                    <noscript>   <div>   
                            <h3 style="color: red;">For full functionality of this page it is necessary to enable JavaScript. Here are the 
                                <a href="http://www.enable-javascript.com" target="_blank"> 
                                    instructions how to enable JavaScript in your web browser</a></h3>
                        </div> </noscript>

                </p:panel>

            </center>  

        </div>

        <div style="; height: 50px;">

            <p style="text-align: center">&copy; #{logo_client.current_yr()} <a href="http://www.mspace.co.ke"><strong>MSpace Solutions Ltd.</strong></a>&nbsp;</p>

        </div>

    </h:body>
</html>

