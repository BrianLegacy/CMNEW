<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0
    Transitional//EN"  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:pe="http://primefaces.org/ui/extensions" 
      xmlns:ui="http://java.sun.com/jsf/facelets">
    <h:head></h:head>


    <h:body>
        <ui:composition> 
            <style>
                .ui-growl-item-container.ui-state-highlight {
                    border-color: red;
                }

                .ui-grid{
                    border:none;
                }
            </style>            
            <p:growl id="msgs" showDetail="true" life="3000"/>
            <p:panel style=" width: 60%; margin:5em auto;" header="User Details" >

                <h:form  enctype="multipart/form-data">
                    <p:panelGrid columns="2" style="width: 40%; padding: 20px; margin: auto; border: none">
                        <h:outputLabel for="name" value="Client Name: " style="border: none; font-weight: bold"/>
                        <p:inputText id="name" value="#{sessionmanager.loggedInuser}" />

                        <h:outputLabel for="password" value="Password: " style=" font-weight: bold"/>
                        <p:panelGrid columns="2" style=" margin-left: -1.0em; align-items: center" >
                            <h:inputText id="password" value="*********"  disabled="true" readonly="true"/> 
                            <p:commandButton icon="pi pi-pencil" title="Click to change password" style="margin-left: 4em" onclick="PF('editgroupmodal').show()"/>
                        </p:panelGrid>

                        <h:outputLabel for="client_logo" value="Client Logo:" style="font-weight: bold; margin-bottom: -10em"/>
                        <p:outputPanel style=" border: 1px solid; display: block; width:20rem; height: 10rem;">
                            <img src="#{sessionmanager.logoPath}" style="height: 100%; width: 100%" alt="" />
                        </p:outputPanel>

                        <p:fileUpload value="#{sessionmanager.uploadedFile}" mode="simple" label="Change Logo" chooseIcon="pi pi-minus" skinSimple="true" style=" margin-top: -10em;"/>

                    </p:panelGrid>

                    <p:panelGrid style="width: 100%;" columns="1">
                        <p:commandButton value="Update Info" style=" margin-left: 50%" action="#{sessionmanager.storeData()}" ajax="false" update="msgs"/>
                    </p:panelGrid>    

                </h:form>
            </p:panel>

            <p:panel id="maintab" header="More Info" style=" width: 80%; margin: auto "  >

                <p:dataTable value="#{userScroller.userProfile}" var="item"
                             id="usertb"  style="width: 100%; border-color: #e3f1fa ;">

                    <p:column>
                        <f:facet name="header" >

                            <h:outputText value="User Details" style="height: 25px" />

                        </f:facet>

                        <h:panelGrid columns="3" cellspacing="2" width="100%">

                            <p:column style="background-color:#e3f1fa ">
                                <h:outputText value="Item"   style="color: #307eae; font-weight: bolder"/>
                            </p:column  >
                            <p:column style="background-color:#e3f1fa">
                                <h:outputText value="Details"   style="color: #307eae; font-weight: bolder" />
                            </p:column>
                            <p:column style="background-color:#e3f1fa">
                                <h:outputText value="Extra"  style="color: #307eae; font-weight: bolder" />
                            </p:column>
                            <p:column colspan="1"><h:outputText value="username" /></p:column>
                            <p:column><h:outputText value="#{item.username}" /></p:column>
                            <p:column>

                            </p:column>



                            <p:column colspan="1"><h:outputText value="Password" /></p:column>
                            <p:column><h:outputText value="*********" /></p:column>
                            <p:column>
                                <h:form >
                                </h:form>

                            </p:column>

                            <p:column colspan="1"><h:outputText value="Start Date" /></p:column>
                            <p:column><h:outputText value="#{item.startDate}" /></p:column>
                            <p:column><h:outputText value="" /></p:column>


                            <p:column colspan="1"><h:outputText value="End Date" /></p:column>
                            <p:column><h:outputText value="#{item.endDate}" /></p:column>
                            <p:column><h:outputText value="" /></p:column>


                            <p:column colspan="1"><h:outputText value="Max Daily" /></p:column>
                            <p:column><h:outputText value="#{userScroller.userProfile.maxDaily}" /></p:column>
                            <p:column><h:outputText value="" /></p:column>


                            <p:column colspan="1"><h:outputText value="Max Weekly" /></p:column>
                            <p:column><h:outputText value="#{item.maxWeekly}" /></p:column>
                            <p:column><h:outputText value="" /></p:column>


                            <p:column colspan="1"><h:outputText value="Max Monthly" /></p:column>
                            <p:column><h:outputText value="#{item.maxMonthly}" /></p:column>
                            <p:column><h:outputText value="" /></p:column>


                            <p:column colspan="1"><h:outputText value="Max Total" /></p:column>
                            <p:column><h:outputText value="#{item.maxTotal}" /></p:column>
                            <p:column><h:outputText value="" /></p:column>


                            <p:column colspan="1"><h:outputText value="Sent Today" /></p:column>
                            <p:column><h:outputText value="#{userScroller.dailyTotal()}" /></p:column>
                            <p:column><h:outputText value="" /></p:column>


                            <p:column colspan="1"><h:outputText value="Sent This week" /></p:column>
                            <p:column><h:outputText value="#{userScroller.weeklyTotal()}" /></p:column>
                            <p:column><h:outputText value="" /></p:column>


                            <p:column colspan="1"><h:outputText value="Sent This Month" /></p:column>
                            <p:column><h:outputText value="#{userScroller.monthlyTotal()}" /></p:column>
                            <p:column><h:outputText value="" /></p:column>


                            <p:column colspan="1"><h:outputText value="Sent  Total" /></p:column>
                            <p:column><h:outputText value="#{userScroller.grandTotal()}" /></p:column>
                            <p:column><h:outputText value="" /></p:column>


                        </h:panelGrid>
                    </p:column>

                </p:dataTable>
            </p:panel>

            <p:dialog header="Change Password" widgetVar="editgroupmodal" id="editgroupmodal" modal="true">
                <h:form>

                    <table align="center" style="margin-top:15px; width: 400px; border-color: white" >
                        <tr >
                            <td ><h:outputLabel for="newpassword" value="New Password" /></td>
                            <td>
                                <p:password style="width: 150px" id="newpassword" 
                                            value="#{sessionmanager.newPassword}" 
                                            required="true"  
                                            >
                                </p:password> 
                                <!--<p:message for="@previous"/>-->
                            </td>
                        </tr>

                    </table>
                    <br/>
                    <div style="display: flex; justify-content: center; margin: 10px 10px 0px 10px">
                        <p:commandButton style="margin-right: 10px" ajax="false"  
                                         value="Update"
                                         actionListener="#{sessionmanager.saveNewPassword()}"
                                         update=":msgs"
                                         >

                        </p:commandButton>

                        <p:commandButton value="Cancel" 
                                         onclick="PF('editgroupmodal').hide();"></p:commandButton>
                    </div>
                </h:form>

            </p:dialog> 
            <!--df-->
        </ui:composition>
    </h:body>
</html> 